{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysql","mysqlConnection","createConnection","host","user","password","database","multipleStatements","connect","err","console","log","post","req","res","next","ob","body","name","value","key","query","rows","fields","send","render","data","tablename","cond","Object","keys","main","id","title","tablenames","module","exports"],"mappings":"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","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\nconst mysql = require(\"mysql\");\r\nvar mysqlConnection = mysql.createConnection({\r\n  host: \"localhost\",\r\n  user: \"root\",\r\n  password: \"loveisone\",\r\n  database: \"helloworld\",\r\n  multipleStatements: true,\r\n});\r\nmysqlConnection.connect((err) => {\r\n  if (err) {\r\n    console.log(\"Not seccess\", err);\r\n  } else {\r\n    console.log(\"sucess\");\r\n  }\r\n});\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  console.log(ob)\r\n  var name;\r\n  var value;\r\n  for(key in ob){\r\n    name=key\r\n    value=ob[key]\r\n  }\r\n  console.log(name)\r\n  console.log(value)\r\n  if(value==\"ADD\"){\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        console.log(rows)\r\n        res.render(\"add\",{data:rows,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        var main=rows;\r\n        console.log(rows)\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          // console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          console.log(rows)\r\n          id = [value[0],Object.keys(ob)[0]]\r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"],"file":"add.dev.js"}