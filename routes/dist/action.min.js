"use strict";var express=require("express"),router=express.Router(),mysql=require("mysql"),mysqlConnection=mysql.createConnection({host:"localhost",user:"root",password:"loveisone",database:"helloworld",multipleStatements:!0});mysqlConnection.connect(function(e){e?console.log("Not seccess",e):console.log("sucess")}),router.post("/",function(e,s,t){var o,n,r=e.body,c=[],a=[];for(key in r){if("string"!=typeof(n=r[key])||isNaN(n)){if("task"==key){o=r[key];continue}c.push(r[key])}else{var i=parseInt(r[key]);c.push(i)}a.push(key)}var l=c.shift();a.shift();var u="'"+c.join("','")+"'",y=""+a.join(",");if("add"==o)mysqlConnection.query("insert into ".concat(l," (").concat(y,") values (").concat(u,")"),function(e,t,o){e?s.send(e):s.redirect("/tables")});else if("edit"==o){value=c.shift(),arr_value=value.split(","),a.shift();for(var f="",p=0;p<a.length;p++){if(p==a.length-1){f+="".concat(a[p],"=")+"'"+c[p]+"'";break}f+="".concat(a[p],"=")+"'"+c[p]+"',"}mysqlConnection.query("update ".concat(l," set ").concat(f," where ").concat(arr_value[0]," = ").concat(arr_value[1]),function(e,t,o){e?s.send(e):s.redirect("/tables")})}}),module.exports=router;
//# sourceMappingURL=action.min.js.map
