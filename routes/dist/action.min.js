"use strict";var express=require("express"),router=express.Router(),mysql=require("mysql"),mysqlConnection=mysql.createConnection({host:"localhost",user:"root",password:"loveisone",database:"helloworld",multipleStatements:!0});mysqlConnection.connect(function(e){e?console.log("Not seccess",e):console.log("sucess")}),router.post("/",function(e,s,o){var t,n,r=e.body,c=[],a=[];for(key in r){if("string"!=typeof(n=r[key])||isNaN(n)){if("task"==key){t=r[key];continue}c.push(r[key])}else{var l=parseInt(r[key]);c.push(l)}a.push(key)}var i=c.shift();a.shift(),console.log(c),console.log(a);var u="'"+c.join("','")+"'",y=""+a.join(",");if("add"==t)mysqlConnection.query("insert into ".concat(i," (").concat(y,") values (").concat(u,")"),function(e,o,t){e?s.send(e):s.redirect("/tables")});else if("edit"==t){value=c.shift(),arr_value=value.split(","),a.shift();for(var f="",p=0;p<a.length;p++){if(p==a.length-1){f+="".concat(a[p],"=")+"'"+c[p]+"'";break}f+="".concat(a[p],"=")+"'"+c[p]+"',"}mysqlConnection.query("update ".concat(i," set ").concat(f," where ").concat(arr_value[0]," = ").concat(arr_value[1]),function(e,o,t){e?s.send(e):s.redirect("/tables")})}}),module.exports=router;
//# sourceMappingURL=action.min.js.map
