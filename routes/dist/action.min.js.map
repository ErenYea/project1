{"version":3,"sources":["action.js"],"names":["express","require","router","Router","mysqlConnection","mysql","createConnection","host","user","password","database","multipleStatements","connect","err","log","console","req","res","next","task","str","data","body","arr","post","key","array_of_column_name","isNumeric","push","num","parseInt","shift","huz","join","ham","tablename","query","rows","fields","send","redirect","arr_value","value","split","update","length","i","concat","module","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,MAAUC,QAAQ,SAGlBG,gBAAkBC,MAAMC,iBAAiB,CAF7CC,KAAIL,YAIFM,KAAM,OAHRC,SAAcR,YAKZS,SAAU,aAJZC,oBAAsBN,IAEpBG,gBAF2CI,QAAA,SAAAC,GAG3CJ,EACAC,QAAUI,IAAA,cAJiCD,GAA7CE,QAAAD,IAAA,YAWIC,OAAAA,KAAQD,IAAI,SAAZE,EAAAC,EAAAC,GACD,IAQCC,EAHAC,EALDC,EAAAL,EAAAM,KALHC,EAAA,GASOC,EAAoBR,GAUvB,IAAIS,OAAOJ,EAAK,CAJd,GAJF,iBADAD,EAKgBA,EAAdK,OAHEC,MAAAA,GAKJ,CAOI,GAAS,QAALD,IAAY,CALpBN,EAAWE,EAAKI,KACVE,SAEEC,EAAJA,KAAAP,EAAAI,UAPF,CACD,IAAAI,EAAAC,SAAAT,EAAAI,MAMGF,EAAIK,KAAKC,GAGPV,EAAAS,KAAAH,KAGAF,IAAAA,EAASF,EAAKI,QACfC,EAAAK,QAGJ,IAAAC,EAAA,IAAAT,EAAAU,KAAA,OAAA,IAQGC,EAAM,GAAKR,EAAqBO,KAAK,KANzC,GAAIE,OAAAA,EACJT,gBAAoBU,MAApBV,eAAAA,OACAS,EADAT,MAAAA,OACAQ,EADAR,cAAAA,OACAM,EADAN,KACA,SAAAb,EAAAwB,EAAAC,GACAzB,EACAI,EAAAsB,KAAA1B,GACUI,EAAAuB,SAAUP,kBAEb,GAAP,QAASd,EAAM,CACbf,MAAAA,EAAAA,QACEqC,UAAOC,MAAAC,MAAA,KACH1B,EAAAc,QAEAd,IADH,IAFD2B,EAEM,GACEJ,EAAAA,EAAAA,EAAJd,EAAAmB,OAAAC,IAAA,CACH,GAAAA,GAAApB,EAAAmB,OAAA,EAAA,CALHD,GAAA,GAAAG,OAAArB,EAAAoB,GAAA,KAAA,IAAAvB,EAAAuB,GAAA,IAOK,MAELL,GAAYC,GAAAA,OAAAA,EAAZI,GAAYJ,KAAZ,IAAAnB,EAAAuB,GAAA,KAWA1C,gBAAgBgC,MAAhB,UAAAW,OAAgCZ,EAAhC,SAAAY,OAAiDH,EAAjD,WAAAG,OAAiEN,UAAU,GAA3E,OAAAM,OAAmFN,UAAU,IAAK,SAAC5B,EAAIwB,EAAKC,GARxGzB,EACCiC,EAACP,KAAEb,GAEJT,EAAAuB,SAAA,gBAQDQ,OAFDC,QAEM/C","file":"action.min.js","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\nconst mysql = require(\"mysql\");\r\nvar mysqlConnection = mysql.createConnection({\r\n  host: \"localhost\",\r\n  user: \"root\",\r\n  password: \"loveisone\",\r\n  database: \"helloworld\",\r\n  multipleStatements: true,\r\n});\r\nmysqlConnection.connect((err) => {\r\n  if (err) {\r\n    console.log(\"Not seccess\", err);\r\n  } else {\r\n    console.log(\"sucess\");\r\n  }\r\n});\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n    var data = req.body;\r\n    var arr = [];\r\n    var array_of_column_name=[];\r\n    function isNumeric(str) {\r\n      if (typeof str != \"string\") return false // we only process strings!  \r\n      return !isNaN(str)  \r\n    }\r\n    var task;\r\n\r\n    for(key in data){\r\n      if (isNumeric(data[key])){\r\n        var num = parseInt(data[key]);\r\n        arr.push(num);\r\n      } else{\r\n        if (key=='task'){\r\n          task=data[key]\r\n          continue;\r\n        }else{\r\n          arr.push(data[key]);\r\n        }\r\n      }\r\n      array_of_column_name.push(key)\r\n    }\r\n    \r\n    var tablename = arr.shift();\r\n    array_of_column_name.shift();\r\n    // console.log(arr)\r\n    // console.log(array_of_column_name)\r\n    // arr.reverse();\r\n    var huz = \"'\" + arr.join(\"','\") + \"'\";\r\n    var ham = \"\" + array_of_column_name.join(\",\") + \"\";\r\n    if(task=='add'){\r\n      mysqlConnection.query(`insert into ${tablename} (${ham}) values (${huz})`,(err,rows,fields)=>{\r\n        if(err){\r\n            res.send(err)\r\n        } else{\r\n            res.redirect('/tables')\r\n        }\r\n      })\r\n    } else if(task=='edit'){\r\n      value = arr.shift();\r\n      arr_value = value.split(\",\");\r\n      array_of_column_name.shift();\r\n      var update=\"\";\r\n      for(var i=0;i<array_of_column_name.length;i++){\r\n        if(i==array_of_column_name.length-1){\r\n          update+=`${array_of_column_name[i]}=`+\"'\"+arr[i]+\"'\";\r\n          break;\r\n        }\r\n        update+=`${array_of_column_name[i]}=`+\"'\"+arr[i]+\"'\"+\",\";\r\n      }\r\n      // res.send(update)\r\n      mysqlConnection.query(`update ${tablename} set ${update} where ${arr_value[0]} = ${arr_value[1]}`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err);\r\n        } else{\r\n          res.redirect('/tables')\r\n        }\r\n      })\r\n\r\n    }\r\n    \r\n    // res.send(ham) ;\r\n    \r\n});\r\n\r\nmodule.exports = router;"]}