{"version":3,"sources":["action.js"],"names":["express","require","router","Router","mysql","mysqlConnection","createConnection","host","user","password","database","multipleStatements","connect","err","console","log","post","req","res","next","data","body","arr","array_of_column_name","isNumeric","str","isNaN","task","key","num","parseInt","push","tablename","shift","huz","join","ham","query","rows","fields","send","redirect","value","arr_value","split","update","i","length","module","exports"],"mappings":";;AAAA,IAAIA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAArB;;AACA,IAAIC,MAAM,GAAGF,OAAO,CAACG,MAAR,EAAb;;AACA,IAAMC,KAAK,GAAGH,OAAO,CAAC,OAAD,CAArB;;AACA,IAAII,eAAe,GAAGD,KAAK,CAACE,gBAAN,CAAuB;AAC3CC,EAAAA,IAAI,EAAE,WADqC;AAE3CC,EAAAA,IAAI,EAAE,MAFqC;AAG3CC,EAAAA,QAAQ,EAAE,WAHiC;AAI3CC,EAAAA,QAAQ,EAAE,YAJiC;AAK3CC,EAAAA,kBAAkB,EAAE;AALuB,CAAvB,CAAtB;AAOAN,eAAe,CAACO,OAAhB,CAAwB,UAACC,GAAD,EAAS;AAC/B,MAAIA,GAAJ,EAAS;AACPC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,GAA3B;AACD,GAFD,MAEO;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACD;AACF,CAND;AASAb,MAAM,CAACc,IAAP,CAAY,GAAZ,EAAiB,UAAUC,GAAV,EAAeC,GAAf,EAAmBC,IAAnB,EAAyB;AACtC,MAAIC,IAAI,GAAGH,GAAG,CAACI,IAAf;AACA,MAAIC,GAAG,GAAG,EAAV;AACA,MAAIC,oBAAoB,GAAC,EAAzB;;AACA,WAASC,SAAT,CAAmBC,GAAnB,EAAwB;AACtB,QAAI,OAAOA,GAAP,IAAc,QAAlB,EAA4B,OAAO,KAAP,CADN,CACmB;;AACzC,WAAO,CAACC,KAAK,CAACD,GAAD,CAAb;AACD;;AACD,MAAIE,IAAJ;;AAEA,OAAIC,GAAJ,IAAWR,IAAX,EAAgB;AACd,QAAII,SAAS,CAACJ,IAAI,CAACQ,GAAD,CAAL,CAAb,EAAyB;AACvB,UAAIC,GAAG,GAAGC,QAAQ,CAACV,IAAI,CAACQ,GAAD,CAAL,CAAlB;AACAN,MAAAA,GAAG,CAACS,IAAJ,CAASF,GAAT;AACD,KAHD,MAGM;AACJ,UAAID,GAAG,IAAE,MAAT,EAAgB;AACdD,QAAAA,IAAI,GAACP,IAAI,CAACQ,GAAD,CAAT;AACA;AACD,OAHD,MAGK;AACHN,QAAAA,GAAG,CAACS,IAAJ,CAASX,IAAI,CAACQ,GAAD,CAAb;AACD;AACF;;AACDL,IAAAA,oBAAoB,CAACQ,IAArB,CAA0BH,GAA1B;AACD;;AAED,MAAII,SAAS,GAAGV,GAAG,CAACW,KAAJ,EAAhB;AACAV,EAAAA,oBAAoB,CAACU,KAArB,GA1BsC,CA2BtC;AACA;AACA;;AACA,MAAIC,GAAG,GAAG,MAAMZ,GAAG,CAACa,IAAJ,CAAS,KAAT,CAAN,GAAwB,GAAlC;AACA,MAAIC,GAAG,GAAG,KAAKb,oBAAoB,CAACY,IAArB,CAA0B,GAA1B,CAAL,GAAsC,EAAhD;;AACA,MAAGR,IAAI,IAAE,KAAT,EAAe;AACbtB,IAAAA,eAAe,CAACgC,KAAhB,uBAAqCL,SAArC,eAAmDI,GAAnD,uBAAmEF,GAAnE,QAA0E,UAACrB,GAAD,EAAKyB,IAAL,EAAUC,MAAV,EAAmB;AAC3F,UAAG1B,GAAH,EAAO;AACHK,QAAAA,GAAG,CAACsB,IAAJ,CAAS3B,GAAT;AACH,OAFD,MAEM;AACFK,QAAAA,GAAG,CAACuB,QAAJ,CAAa,SAAb;AACH;AACF,KAND;AAOD,GARD,MAQO,IAAGd,IAAI,IAAE,MAAT,EAAgB;AACrBe,IAAAA,KAAK,GAAGpB,GAAG,CAACW,KAAJ,EAAR;AACAU,IAAAA,SAAS,GAAGD,KAAK,CAACE,KAAN,CAAY,GAAZ,CAAZ;AACArB,IAAAA,oBAAoB,CAACU,KAArB;AACA,QAAIY,MAAM,GAAC,EAAX;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACvB,oBAAoB,CAACwB,MAAnC,EAA0CD,CAAC,EAA3C,EAA8C;AAC5C,UAAGA,CAAC,IAAEvB,oBAAoB,CAACwB,MAArB,GAA4B,CAAlC,EAAoC;AAClCF,QAAAA,MAAM,IAAE,UAAGtB,oBAAoB,CAACuB,CAAD,CAAvB,SAA8B,GAA9B,GAAkCxB,GAAG,CAACwB,CAAD,CAArC,GAAyC,GAAjD;AACA;AACD;;AACDD,MAAAA,MAAM,IAAE,UAAGtB,oBAAoB,CAACuB,CAAD,CAAvB,SAA8B,GAA9B,GAAkCxB,GAAG,CAACwB,CAAD,CAArC,GAAyC,GAAzC,GAA6C,GAArD;AACD,KAXoB,CAYrB;;;AACAzC,IAAAA,eAAe,CAACgC,KAAhB,kBAAgCL,SAAhC,kBAAiDa,MAAjD,oBAAiEF,SAAS,CAAC,CAAD,CAA1E,gBAAmFA,SAAS,CAAC,CAAD,CAA5F,GAAkG,UAAC9B,GAAD,EAAKyB,IAAL,EAAUC,MAAV,EAAmB;AACnH,UAAG1B,GAAH,EAAO;AACLK,QAAAA,GAAG,CAACsB,IAAJ,CAAS3B,GAAT;AACD,OAFD,MAEM;AACJK,QAAAA,GAAG,CAACuB,QAAJ,CAAa,SAAb;AACD;AACF,KAND;AAQD,GA7DqC,CA+DtC;;AAEH,CAjED;AAmEAO,MAAM,CAACC,OAAP,GAAiB/C,MAAjB","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\nconst mysql = require(\"mysql\");\r\nvar mysqlConnection = mysql.createConnection({\r\n  host: \"localhost\",\r\n  user: \"root\",\r\n  password: \"loveisone\",\r\n  database: \"helloworld\",\r\n  multipleStatements: true,\r\n});\r\nmysqlConnection.connect((err) => {\r\n  if (err) {\r\n    console.log(\"Not seccess\", err);\r\n  } else {\r\n    console.log(\"sucess\");\r\n  }\r\n});\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n    var data = req.body;\r\n    var arr = [];\r\n    var array_of_column_name=[];\r\n    function isNumeric(str) {\r\n      if (typeof str != \"string\") return false // we only process strings!  \r\n      return !isNaN(str)  \r\n    }\r\n    var task;\r\n\r\n    for(key in data){\r\n      if (isNumeric(data[key])){\r\n        var num = parseInt(data[key]);\r\n        arr.push(num);\r\n      } else{\r\n        if (key=='task'){\r\n          task=data[key]\r\n          continue;\r\n        }else{\r\n          arr.push(data[key]);\r\n        }\r\n      }\r\n      array_of_column_name.push(key)\r\n    }\r\n    \r\n    var tablename = arr.shift();\r\n    array_of_column_name.shift();\r\n    // console.log(arr)\r\n    // console.log(array_of_column_name)\r\n    // arr.reverse();\r\n    var huz = \"'\" + arr.join(\"','\") + \"'\";\r\n    var ham = \"\" + array_of_column_name.join(\",\") + \"\";\r\n    if(task=='add'){\r\n      mysqlConnection.query(`insert into ${tablename} (${ham}) values (${huz})`,(err,rows,fields)=>{\r\n        if(err){\r\n            res.send(err)\r\n        } else{\r\n            res.redirect('/tables')\r\n        }\r\n      })\r\n    } else if(task=='edit'){\r\n      value = arr.shift();\r\n      arr_value = value.split(\",\");\r\n      array_of_column_name.shift();\r\n      var update=\"\";\r\n      for(var i=0;i<array_of_column_name.length;i++){\r\n        if(i==array_of_column_name.length-1){\r\n          update+=`${array_of_column_name[i]}=`+\"'\"+arr[i]+\"'\";\r\n          break;\r\n        }\r\n        update+=`${array_of_column_name[i]}=`+\"'\"+arr[i]+\"'\"+\",\";\r\n      }\r\n      // res.send(update)\r\n      mysqlConnection.query(`update ${tablename} set ${update} where ${arr_value[0]} = ${arr_value[1]}`,(err,rows,fields)=>{\r\n        if(err){\r\n          res.send(err);\r\n        } else{\r\n          res.redirect('/tables')\r\n        }\r\n      })\r\n\r\n    }\r\n    \r\n    // res.send(ham) ;\r\n    \r\n});\r\n\r\nmodule.exports = router;"],"file":"action.dev.js"}