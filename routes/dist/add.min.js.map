{"version":3,"sources":["add.js"],"names":["express","require","router","Router","mysqlConnection","mysql","createConnection","host","user","password","database","multipleStatements","connect","err","log","console","post","req","res","next","ob","value","body","Object","getOwnPropertyNames","length","name","key","keys","query","rows","fields","render","data","tablename","cond","concat","main","id","send","module","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,MAAUC,QAAQ,SAGlBG,gBAAkBC,MAAMC,iBAAiB,CAF7CC,KAAIL,YAIFM,KAAM,OAHRC,SAAcR,YAKZS,SAAU,aAJZC,oBAAsBN,IAEpBG,gBAF2CI,QAAA,SAAAC,GAG3CJ,EACAC,QAAUI,IAAA,cAJiCD,GAA7CE,QAAAD,IAAA,YAUGZ,OAFDc,KAEO,IAAA,SAAAC,EAAAC,EAAAC,GAEN,IAKGC,EAEJC,EAPCD,EAAAH,EAAAK,KAWD,GAPAP,QAAAD,IAAAM,GAO4C,GAAzCG,OAAOC,oBAAoBJ,GAAIK,OAFlC,IAAIC,OAAJN,EACIC,EAAJM,IAKIN,EAAMD,EAAGO,UADTD,EAAIH,OAAJK,KAAAR,GAAA,GACAC,EAAAA,EAAKE,OAAGK,KAARR,GAAA,IAKH,GAFCM,QAAIZ,IAAES,GACNF,QAAKP,IAAGO,GACT,OAAAA,EAEDN,gBAAAc,MAAAd,+IAAAA,OAEgBW,EAFhBX,KAEgB,SAAAF,EAAAiB,EAAAC,GAEd3B,EAKEc,EAAGL,KAAIA,GAGLK,EAAAc,OAAA,MAAA,CAAAC,KAAAH,EAAAI,UAAAR,EAAAS,KAAA,eAC2CA,GAAK,QAALA,EAAIZ,OAACK,KAAAR,GAAA,IAA/BhB,gBACjByB,MADiB,qIAAAO,OATrBhB,EAAAc,UASqB,KATrB,SAAArB,EAAAiB,EAAAC,GAFF,IAeOM,EAAMd,EACTnB,QAAAA,IAAgByB,GAGdzB,gBAAAyB,MAAA,iBAAAO,OAAAhB,EAAAc,UAAA,WAAAE,OAAAhB,EAAAkB,GAAA,GAAA,KAAAF,OAAAb,OAAAK,KAAAR,GAAA,IAAA,SAAAP,EAAAiB,EAAAC,GACAhB,QAAYe,IAAZf,iBAAAA,OAAAK,EAAAc,UAAAnB,WAAAA,OAAAM,EAAA,GAAAN,KAAAA,OAAAQ,OAAAK,KAAAR,GAAA,KACAhB,QAAAA,IAAgByB,GACdd,GAAO,CAACD,EAARwB,GAAA,GAAAf,OAAAK,KAAAR,GAAA,IACAL,EAAAA,OAAYe,MAAZ,CAAAG,KAAAI,EAAAP,KAAAA,EAAAI,UAAAd,EAAAc,UAAAC,KAAA,OAAAG,GAAAA,aAEsCJ,CAAuBC,IAAAA,EAAK,CAAAT,GAAOY,gBAAGA,MAAHA,iBAAAA,OAAGA,GAAAA,SAAAA,EAAAA,EAAAA,GAA3D,GACjBzB,EALFK,EAAAqB,KAAA1B,OALF,CAcC,IAAAoB,EAAA,CAAAH,GACGI,EAAAA,OAAWR,SAAf,CACAtB,MAAAA,UACMS,KAAIoB,EACFM,WAAJL,EADFC,KAEM,eAYbK,OApEDC,QAAAvC","file":"add.min.js","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\nconst mysql = require(\"mysql\");\r\nvar mysqlConnection = mysql.createConnection({\r\n  host: \"localhost\",\r\n  user: \"root\",\r\n  password: \"loveisone\",\r\n  database: \"helloworld\",\r\n  multipleStatements: true,\r\n});\r\nmysqlConnection.connect((err) => {\r\n  if (err) {\r\n    console.log(\"Not seccess\", err);\r\n  } else {\r\n    console.log(\"sucess\");\r\n  }\r\n});\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  // console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  console.log(ob)\r\n  var name;\r\n  var value;\r\n  if(Object.getOwnPropertyNames(ob).length == 1){\r\n    \r\n    for(key in ob){\r\n      name=key\r\n      value=ob[key]\r\n    }\r\n  }else{\r\n    name= Object.keys(ob)[0]\r\n    value=ob[Object.keys(ob)[0]]\r\n  }\r\n  \r\n  console.log(name)\r\n  console.log(value)\r\n  if(value==\"ADD\"){\r\n    // console.log('hello')\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        // console.log(rows)\r\n        res.render(\"add\",{data:rows,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        var main=rows;\r\n        console.log(rows)\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          console.log(rows)\r\n          id = [ob.id[0],Object.keys(ob)[0]]\r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"]}