{"version":3,"sources":["add.js"],"names":["express","require","router","Router","post","req","res","next","name","value","ob","body","Object","getOwnPropertyNames","length","key","keys","mysqlConnection","query","concat","err","rows","fields","send","data","tablename","cond","main","id","render","module","exports"],"mappings":"aAAA,IAAIA,QAAUC,QAAQ,WAClBC,OAASF,QAAQG,SADjBH,gBAAkBC,QAAtB,kBAKAC,OAAOE,KAAK,IAAK,SAAUC,EAAKC,EAAIC,GAElC,IAEAC,EACAC,EAHIC,EAAKL,EAAIM,KAMb,GAA4C,GAAzCC,OAAOC,oBAAoBH,GAAII,OADlC,IAAIL,OAAJC,EAIIF,EAAKO,IAHNH,EAAMF,EAACG,UAINJ,EAAAA,OAASM,KAATL,GAAA,GACDD,EAAAC,EAAAE,OAAAI,KAAAN,GAAA,IAOH,GAAA,OAAAD,EAGEQ,gBAAgBC,MAAhB,+IAAAC,OAAgBD,EAAhB,KAAA,SAAAE,EAAAC,EAAAC,GAMIhB,EADFA,EAAAiB,KAEKH,GAEeI,EAAAA,OAAKH,MAAN,CAAAG,KAAAH,EAAAI,UAAAjB,EAAAkB,KAAA,eAElB,GAAA,QAAAhB,EAAAE,OAAAI,KAAAN,GAAA,IAXHO,gBAAAC,MAAA,qIAAAC,OAcET,EAAAe,UAdF,KAcE,SAAAL,EAAAC,EAAAC,GAGE,IAAIK,EAAKN,EAETJ,gBAAgBC,MAAhBD,iBAAAA,OAAAP,EAAAe,UAAAR,WAAAA,OAAAP,EAAAkB,GAAA,GAAAX,KAAAA,OAAAL,OAAgEgB,KAAhElB,GAAA,IAAA,SAAAU,EAAyER,EAAMU,GAG3EM,GAAIlB,CAAEA,EAAFkB,GAAD,GAAUhB,OAAOI,KAAKN,GAAZ,IACfJ,EAAIuB,OAAO,MAAM,CAAAL,KAAAG,EAAAN,KAAAA,EAAAI,UAAAf,EAAAe,UAAAC,KAAA,OAAAE,GAAAA,aAAwDA,CAAxD,IAAjBH,EACA,CAAAjB,GACDS,gBANDC,MAMC,iBAAAC,OANDX,GAAA,SAAAY,EAAAC,EAAAC,GALF,GAAAF,EAcCd,EAAAiB,KAAAH,OACGK,CACJR,IAAAA,EAAgBC,CAAAA,GACVE,EAAJS,OAAQ,SAAA,CACFN,MAAKH,UADXI,KAEMA,EACAA,WAAOH,EACPQ,KAAAA,eAedC,OAAOC,QAAU7B","file":"add.min.js","sourcesContent":["var express = require(\"express\");\r\nvar router = express.Router();\r\nconst mysqlConnection = require(\"./mysqlconn.js\");\r\n\r\n\r\nrouter.post(\"/\", function (req, res,next) {\r\n  // console.log(\"added\")\r\n  var ob = req.body\r\n  // var id = req.params;\r\n  // console.log(id)\r\n  // console.log(ob)\r\n  var name;\r\n  var value;\r\n  if(Object.getOwnPropertyNames(ob).length == 1){\r\n    \r\n    for(key in ob){\r\n      name=key\r\n      value=ob[key]\r\n    }\r\n  }else{\r\n    name= Object.keys(ob)[0]\r\n    value=ob[Object.keys(ob)[0]]\r\n  }\r\n  \r\n  // console.log(name)\r\n  // console.log(value)\r\n  if(value==\"ADD\"){\r\n    // console.log('hello')\r\n    mysqlConnection.query(`select COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,  \r\n       IS_NULLABLE \r\n    from INFORMATION_SCHEMA.COLUMNS\r\n    where TABLE_NAME='${name}'`,(err,rows,fields)=>{\r\n\r\n      if(err){\r\n        res.send(err)\r\n      }else{\r\n        // console.log(rows)\r\n        res.render(\"add\",{data:rows,tablename:name,cond:'add'});\r\n        // res.send(rows)\r\n      }\r\n    });\r\n  } else if(ob[Object.keys(ob)[0]]=='EDIT'){\r\n      mysqlConnection.query(`select COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH,IS_NULLABLE\r\n      from INFORMATION_SCHEMA.COLUMNS\r\n      where TABLE_NAME='${ob.tablename}'`,(err,rows,fields)=>{\r\n        var main=rows;\r\n        // console.log(rows)\r\n        mysqlConnection.query(`select * from ${ob.tablename} where ${ob.id[0]}=${Object.keys(ob)[0]}`,(err,rows,fields)=>{\r\n          // console.log(`select * from ${ob.tablename} where ${value[0]}=${Object.keys(ob)[0]}`)\r\n          // console.log(rows)\r\n          id = [ob.id[0],Object.keys(ob)[0]]\r\n          res.render(\"add\",{data:main,rows:rows,tablename:ob.tablename,cond:'edit',id:id})\r\n          // res.send(rows);\r\n        })\r\n      })\r\n      \r\n  }else{\r\n      var tablename=[name]\r\n      mysqlConnection.query(`SELECT * from ${name}`,(err,rows,fields)=>{\r\n        if (err){\r\n          res.send(err)\r\n        } else{\r\n          var data =[rows]\r\n          res.render(\"tables\",{\r\n            title:\"Express\",\r\n            data:data,\r\n            tablenames:tablename,\r\n            cond:\"view\"\r\n          })\r\n        }\r\n      });\r\n  }\r\n  \r\n})\r\n  \r\n    \r\n\r\n\r\nmodule.exports = router;"]}